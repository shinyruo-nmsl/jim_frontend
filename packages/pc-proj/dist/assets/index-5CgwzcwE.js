import{r as p,j as t,b3 as m,W as P}from"./index-7zKW46BM.js";import{g as u}from"./aiTextGener-BeKmR5ky.js";import{U as x,W as T}from"./index-DYrcAvlH.js";import{I as f}from"./index-vg39t7Ky.js";import"./index-DjF3hdwP.js";import"./addEventListener-Ckdk3TQo.js";const{File:{fetchUploadImgFile:h}}=T,{Http:{createFetchStream:S},Html:{downloadFileFromBlob:b}}=P;function F(){const n={description:"请根据图片描述和下面TypeScript类型定义，生成一个类型为 PPTSource 的对象，并且只输出这个对象：```interface TableCell { text?: string; } type TableRow = TableCell[]; type TableElement = { type: 'table'; content: TableRow[]; }; type ShapeElement = { type: 'shape'; content: string; }; type TextElement = { type: 'text'; content: string; }; type SildeElement = TableElement | ShapeElement | TextElement; type PPTSlide = { elements: SildeElement[]; }; type PPTSource = { slides: PPTSlide[]; }```",imgUrl:""},[r,l]=p.useState(null),[o,a]=p.useState(!1),c=async()=>{if(!r||!n.description||o)return;a(!0);const{url:s}=await h({imgFile:r.file}),d=await S(x.ParseImage,{message:{description:n.description,imgUrl:s}});let e="";for await(const g of d)e+=g;console.log("result:",e.trim()),console.log("JSON.parse(result.trim()):",JSON.parse(m(e.trim())));const i=await u(JSON.parse(m(e.trim())));console.log("ppt:",i),b(i,"PPTGener.pptx"),a(!1)};return t.jsxs("div",{children:[t.jsx("h1",{children:"PPTGener"}),t.jsx("div",{className:"box-border w-full h-fit p-[24px] flex-none",children:t.jsx(f,{value:n.description,img:r,textareaProps:{placeholder:"使用图片时，复制图片到此处，或者点击上传",maxLength:1e3,disabled:o},onPressEnter:c,onChange:()=>{},onUploadImg:s=>l(s),onRemoveImg:()=>l(null)})})]})}export{F as default};
